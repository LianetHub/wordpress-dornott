(() => { "use strict"; if ($(".preloader").length > 0) { let e = setInterval(function () { let t = $("#percentage"), n = parseInt(t.text()); n < 90 ? t.text(++n) : n < 95 && "interactive" === document.readyState ? t.text(95) : n < 99 && "complete" === document.readyState && t.text(99), n >= 99 && "complete" === document.readyState && (clearInterval(e), t.text(100), setTimeout(function () { $("body").removeClass("preloading").addClass("is-loaded") }, 300)) }, 20) } $(function () { "undefined" != typeof Fancybox && null !== Fancybox && Fancybox.bind("[data-fancybox]", { dragToClose: !1, on: { ready: e => { const t = e.getSlide(); if ("#policies" === t.src) { const e = $(t.el), n = t.triggerEl; if (n) { const t = n.getAttribute("href").replace("#", ""), i = e.find(`input[name="policy-type"][value="${t}"]`); i.length ? i.prop("checked", !0).trigger("change") : e.find('input[name="policy-type"]:checked').trigger("change"), setTimeout(() => { i.length ? i.prop("checked", !0).trigger("change") : e.find('input[name="policy-type"]:checked').trigger("change") }, 300) } } } } }); const e = { Android: () => /Android/i.test(navigator.userAgent), BlackBerry: () => /BlackBerry/i.test(navigator.userAgent), iOS: () => /iPhone|iPad|iPod/i.test(navigator.userAgent), Opera: () => /Opera Mini/i.test(navigator.userAgent), Windows: () => /IEMobile/i.test(navigator.userAgent), any: function () { return this.Android() || this.BlackBerry() || this.iOS() || this.Opera() || this.Windows() } }; function t() { e.any() || $(window).width() < 992 ? $("body").removeClass("_pc").addClass("_touch") : $("body").removeClass("_touch").addClass("_pc") } function n() { const e = $(".steps__item"); e.off("click mouseenter mouseleave"), $("body").hasClass("_pc") ? e.on("mouseenter", function () { $(this).addClass("active").siblings().removeClass("active") }) : e.on("click", function (e) { $(this).addClass("active").siblings().removeClass("active") }) } t(), n(), $(window).on("resize", () => { clearTimeout(window.resizeTimer), window.resizeTimer = setTimeout(() => { t(), n() }, 100) }), $(document).on("click", e => { const t = $(e.target); t.closest(".header__menu-toggler").length && ($(".header__menu-toggler").toggleClass("active"), $(".header").toggleClass("open-mobile-menu"), $("body").toggleClass("lock-mobile-menu")), !t.closest(".header").length && $(".header").hasClass("open-mobile-menu") && ($(".header__menu-toggler").removeClass("active"), $(".header").removeClass("open-mobile-menu"), $("body").removeClass("lock-mobile-menu")), t.closest(".favorite-btn").length && t.closest(".favorite-btn").toggleClass("active"), t.closest(".add-to-cart-button").length && t.closest(".add-to-cart-button").toggleClass("active") }); var i = document.querySelectorAll('input[type="tel"]'), o = function (e) { return e.value.replace(/\D/g, "") }, s = function (e) { var t = e.target, n = o(t), i = e.clipboardData || window.clipboardData; if (i) { var s = i.getData("Text"); if (/\D/g.test(s)) return void (t.value = n) } }, r = function (e) { var t = e.target, n = o(t), i = t.selectionStart, s = ""; if (!n) return t.value = ""; if (t.value.length == i) { if (["7", "8", "9"].indexOf(n[0]) > -1) { "9" == n[0] && (n = "7" + n); var r = "8" == n[0] ? "8" : "+7"; s = t.value = r + " ", n.length > 1 && (s += "(" + n.substring(1, 4)), n.length >= 5 && (s += ") " + n.substring(4, 7)), n.length >= 8 && (s += "-" + n.substring(7, 9)), n.length >= 10 && (s += "-" + n.substring(9, 11)) } else s = "+" + n.substring(0, 16); t.value = s } else e.data && /\D/g.test(e.data) && (t.value = n) }, a = function (e) { var t = e.target.value.replace(/\D/g, ""); 8 == e.keyCode && 1 == t.length && (e.target.value = "") }; for (var c of i) c.addEventListener("keydown", a), c.addEventListener("input", r, !1), c.addEventListener("paste", s, !1); const l = { type: "fraction", formatFractionCurrent: e => e < 10 ? "0" + e : e, formatFractionTotal: e => e < 10 ? "0" + e : e, renderFraction: (e, t) => '<span class="' + e + '"></span>/<span class="' + t + '"></span>' }; if ($(".hero").length) { const e = $(".hero__images"), t = $(".hero__offer-slider"); if (e.length && t.length) { const n = new Swiper(e.get(0), { loop: !0, effect: "fade", fadeEffect: { crossFade: !0 }, speed: 600, allowTouchMove: !1, navigation: { nextEl: ".hero__next", prevEl: ".hero__prev" }, pagination: { el: ".hero__pagination", ...l } }), i = new Swiper(t.get(0), { loop: !0, speed: 600, effect: "fade", fadeEffect: { crossFade: !0 }, controller: { control: n } }); n.controller.control = i } } if ($(".product-card").length && $(".product-card").each(function (e, t) { const n = $(t).find(".product-card__slider"); if (!n.length) return; const i = $(t).find(".product-card__pagination")[0], o = new Swiper(n[0], { slidesPerView: 1, speed: 0, lazy: !0, watchOverflow: !0, pagination: { el: i, clickable: !0 } }), s = o.slides.length; if (s > 1) { const e = $('<div class="product-card__hover-areas"></div>'); e.css({ position: "absolute", top: 0, left: 0, right: 0, bottom: 0, display: "flex", zIndex: 10 }); for (let t = 0; t < s; t++) { const n = $('<div class="product-card__hover-area"></div>'); n.css({ flex: "1 1 0" }), n.on("mouseenter", () => { o.slideTo(t) }), e.append(n) } n.css("position", "relative").append(e) } }), $(".reviews").length) { let e; const t = () => { $(".reviews__text .reviews__slider").length && !e && (e = new Swiper(".reviews__text .reviews__slider", { slidesPerView: 1, spaceBetween: 24, watchOverflow: !0, navigation: { nextEl: ".reviews__controls--text .reviews__next", prevEl: ".reviews__controls--text .reviews__prev" }, pagination: { el: ".reviews__controls--text .reviews__pagination", ...l }, breakpoints: { 1199.98: { slidesPerView: 4 } } })) }; let n; const i = () => { $(".reviews__screenshots .reviews__slider").length && !n && (n = new Swiper(".reviews__screenshots .reviews__slider", { slidesPerView: 1, spaceBetween: 24, watchOverflow: !0, navigation: { nextEl: ".reviews__controls--screenshots .reviews__next", prevEl: ".reviews__controls--screenshots .reviews__prev" }, pagination: { el: ".reviews__controls--screenshots .reviews__pagination", ...l }, breakpoints: { 768: { slidesPerView: 2 }, 1024: { slidesPerView: 5 } } })) }, o = $("#reviews"), s = o.find('.reviews__switcher input[name="reviews-type"]'), r = o.find(".reviews__text"), a = o.find(".reviews__screenshots"), c = o.find(".reviews__controls--text"), d = o.find(".reviews__controls--screenshots"); "text" === s.filter(":checked").val() ? t() : i(), s.on("change", function () { const o = $(this).val(); "text" === o ? (r.show(), a.hide(), c.show(), d.hide(), t()) : "screenshots" === o && (r.hide(), a.show(), c.hide(), d.show(), i()), e && e.update(), n && n.update() }) } $(document).on("change", ".product-card .product-card__variations-input", function () { var e = $(this).closest(".product-card"), t = $(this).val(), n = $(this).data("price-html"), i = $(this).data("regular-price-html"), o = !$(this).is(":disabled"), s = e.find('[data-price-role="current-price"]'), r = e.find('[data-price-role="regular-price"]'), a = e.find(".ajax_add_to_cart"); s.html(n), r.html(i), a.data("variation-id", t), o ? a.removeAttr("disabled") : a.attr("disabled", "disabled") }), $(".product-card").each(function () { var e = $(this).find(".product-card__variations-input:checked"); e.length && e.trigger("change") }), $(document).on("change", '#policies input[name="policy-type"]', function () { const e = $(this), t = e.closest("#policies"), n = t.find(".switcher__item").index(e.closest(".switcher__item")); t.find(".popup__text").hide().eq(n).show() }); const d = $(".header"); new IntersectionObserver(function (e, t) { e[0].isIntersecting ? d.removeClass("scroll") : d.addClass("scroll") }).observe(d[0]), $(".switcher").each(function () { var e, t = $(this), n = $('<div class="switcher__slider"></div>'); function i(e) { if (t.is(":visible")) { var n = e.next(".switcher__btn"); if (n.length) { var i = n.outerWidth(), o = n.offset().left - t.offset().left - parseFloat(t.css("padding-left")); t.css("--active-width", i + "px"), t.css("--active-offset", o + "px") } } } t.prepend(n), new ResizeObserver(function (e) { for (var n of e) if (n.contentRect.width > 0 || n.contentRect.height > 0) { var o = t.find(".switcher__input:checked"); o.length && i(o) } }).observe(t[0]), t.on("change", ".switcher__input", function () { i($(this)) }), $(window).on("resize", function () { clearTimeout(e), e = setTimeout(function () { var e = t.find(".switcher__input:checked"); e.length && i(e) }, 150) }) }); var p = !1; $(window).scroll(function () { let e = $("#map"); if (!p && e.length > 0) { let t = document.createElement("script"); t.async = !0, t.defer = !0, t.src = "https://api-maps.yandex.ru/2.1/?lang=ru_RU"; let n = e.offset().top - $(window).height() - 200; $(this).scrollTop() > n && (document.head.append(t), t.onload = function () { !function () { const e = $("#map"); for (var t = e.data("coords").split("; "), n = e.data("placemark-logo"), i = 0; i < t.length; i++) { t[i] = t[i].split(", "); for (var o = 0; o < t[i].length; o++)t[i][o] = parseFloat(t[i][o]) } var s = t[0].map(function (e) { return e }); ymaps.ready(function () { var e = new ymaps.Map("map", { center: s, zoom: 16, controls: [] }), i = new ymaps.Placemark(t[0], {}, { iconLayout: "default#image", iconImageHref: n, iconImageSize: [69, 78], iconImageOffset: [-35, -78] }), o = new ymaps.control.ZoomControl({ options: { position: { right: 10, top: 200 } } }); e.behaviors.disable("scrollZoom"), e.controls.add(o), e.geoObjects.add(i) }) }() }, p = !0) } }), $(".quantity-block").each(function () { const e = $(this), t = e.find(".quantity-block__input"), n = e.find(".quantity-block__up"), i = e.find(".quantity-block__down"); n.on("click", function () { let e = parseInt(t.val()) || 0; e < 999 && t.val(e + 1) }), i.on("click", function () { let e = parseInt(t.val()) || 0; e > 1 && t.val(e - 1) }), t.on("input", function () { let e = t.val().replace(/\D/g, ""); e = parseInt(e) || 1, e < 1 && (e = 1), e > 999 && (e = 999), t.val(e) }), t.on("paste", function (e) { const t = e.originalEvent.clipboardData.getData("text"); /\D/.test(t) && e.preventDefault() }) }) }) })();